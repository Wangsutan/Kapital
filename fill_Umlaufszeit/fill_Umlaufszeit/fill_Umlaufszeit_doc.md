本代码模拟实现以下经济问题：用追加了的预付资本，填充流通期间。

---

劳动期间Arbeitsperiode和流通期间Umlaufszeit这些参数可以自行设定。

生产期间内的非劳动期间，other_Produktionsperiode，默认为0。

周转期间等于上述三个参数之和。由于other_Produktionsperiode默认为0，这里的周转期间实际上=劳动期间+流通期间。

每周所用的流动资本，flüssiges_Kapital_per_week，比如为100镑。

参数num_circle设定了单个资本循环（从预付到回流）的次数。

**上面列举了本代码所需的基本参数。**

---

for循环下，处理每次资本循环时的特定数据。

先打印循环的次数。起初是1。

参数time_pointer代表一个时间点，相当于一个抽象的指针。起初，它的值是0，意思是0周末、1周初。

在循环中，首先将参数time_pointer的值赋给劳动期间的开始点，Arbeit_begin，意思是劳动期间开始于这个指针所指向的时刻。

在Arbeit_begin所具有的时刻之基础上，加上劳动期间的长度，Arbeitsperiode，可得劳动期间的结束点，Arbeit_end。

但是，这里有一个**看起来特殊的操作**，就是，将当前的劳动期间之结束点的值，赋给抽象指针，time_pointer。这是因为，此次劳动期间之结束点，由于劳动期间在预期中连续进行，而又成为下次劳动期间之开始点。比如，对此次劳动期间来说，结束点是9周末，那么下次劳动期间的开始点就会是紧接着的10周初。9周末与10周初，可以视为同一时刻。

某次周转期间内的劳动期间之结束点，又是该次周转期间内的流通期间之开始点。故Arbeit_end的值又要赋给Umlauf_begin。注意，在这里来说，劳动期间之结束点比如说是9周末，流通期间之开始点比如说是10周初。这两个值在意义上是不同的，但在这里的数据表现方式上，采用了同样的数据，皆为比如说9。这样的安排，有利于数据处理。

现在，我们已经有了某次、这里是首次资本周转的以下数据结果：劳动期间的开始点和结束点，周转期间的开始点和结束点，共4个数值。其中，第2、3个数值一定是相等的。

这一套、四个数值，可以存储在列表production_situation之中。这个列表，表示某一次资本周转中的四个关键节点。每次循环时，可以打印出来这个列表，与循环的次数的值结合起来，方便使用者查看每次循环时的相关数据。

这样的列表，又添加到列表production_situations。这个嵌套列表保存本代码所生成的全部循环的全部关键节点之数据。

---

现在，处理了循环体之后，for循环重新开始，此时资本周转次数增加了1。抽象指针time_pointer的值亦增大了，变成了上次资本循环中劳动期间之结束点，即，本次资本循环中劳动期间之开始点。所以，再拿time_pointer赋值给Arbeit_begin，就是完全合理的。

以下继续进行循环体内的其他操作。

该循环体持续进行，除非达到了该循环的右边界。意思是处理完了预期的资本循环次数。

我们将左边界设为1，是为了方便理解，因而相应地，右边界所用的资本循环次数的参数num_circle上也要加1，因为右边界本身在range里是不包括在内的。

---

这个嵌套列表可以Pandas转化为Dataframe数据结构，添加具体的、对应的列名，再保存到表格文件，以便固定地保存相关数据，方便后期的深入处理。

---

下面开始画图。

我们选择用甘特图，是为了更好地展现以下经济问题：预付资本填充流通时间，会导致资本循环的区间相互重叠。甘特图是用多维的条形图，将重叠了的东西拆分开来展示。

为了更好地区别不同的经济运动部分，我们需要设置不同的颜色，保存在比如列表color中。

为了画出来嵌套列表production_situations里的数据，这里采用了嵌套for循环，来找出这些数据。

外层的for循环，用于一个个地查找那个嵌套列表中的每个列表。

外层for循环的右边界，即是那个嵌套列表的长度。

内层的for循环，用于一个个地查找那个嵌套列表中的特定列表中的每个数据。

注意，内层for循环的右边界比较特殊，不能直接是那个嵌套列表中的特定列表的长度（这里直接用其中的第1个的长度来表示），而需要再减1。

因为，画图时需要用到的是内部的列表之相邻的后、前两个值的差，因而涉及该列表中的后一个值；如果不减1，就会出现以下错误：列表索引超出范围。

这里用Matplotlib画图。在画图代码中，

- barh表示画横的条形图；

- `i + 1`表示纵坐标位置；

- 然后是特定的内部列表中后一个值与前一个值之差；

- 参数left设置了每一行中若干条型图开始画的特定位置。这个值由减数的值决定，表示从减数的值所对应的位置开始画；

- 参数color取决于颜色列表color和内层列表的索引。

可以设置该图的标题。

为了便于理解图中的条形图，可以设置特定条形图的标签。比如我们所关注的是劳动期间和流通期间，就可以分别设置出来。

列表colors_select与标签的数据对应起来。我们使用了`matplotlib.patches`。

注意：colors_select这个列表中的色彩代码，应该与此前的颜色列表color存在对应关系。由于在production_situations的内部列表中，劳动期间之结束点与流通期间之开始点是一致的，所以，在图中实际上看不到它们之间所形成的条形图。但这个条形图在计算机看来是存在的，只不过长度为0。这个情况会导致这个片段会占用颜色列表color中的第2个颜色。因此，在colors_select中，应该跳过color的这个第2个颜色。需要给出标签的只有2个片段，因此colors_select也只需2种颜色即可。

我们可以为该图设置x轴、y轴的名称。

x轴的刻度，可以作出更仔细的调整。设置右边界时，依据所产生的周转数据的最后一个时刻，在此基础上再加上一个完整的周转期间，再加上1（因为右边界本身是不包括的）。刻度的距离设置为2，以免过分拥挤，而且2也容易划分为单位1。

为了便于查看每次周转期间关键节点的位置，可以考虑加上网格线。网格线的基础是x轴的刻度。设为虚线，透明度调低。

最后，展示图片。
