一种商品的价值，等于其中转移过来的生产资料的旧价值加上其中新加入的劳动所形成的新价值。因此，只要知道该商品的生产过程中所需要的劳动、机器、原料、燃料、辅助材料等等的数量和单位价值，就可以计算出该商品的价值。

# 最终产品价值的简单计算

我们先来看一种简单的情况。假设生产1个单位的茶叶蛋所需要的各种生产要素的情况如下表《茶叶蛋生产要素表_简单》所示。比如，生产要素中的鸡蛋的单位是个，数量为1，单价为0.98，劳动的单位是小时，数量是0.1，单价是8，诸如此类。

茶叶蛋生产要素表_简单

| **生产要素** | **单位** | **数量** | **单价** |
| -------- | ------ | ------ | ------ |
| 劳动       | 小时     | 0.1    | 4      |
| 鸡蛋       | 个      | 1      | 0.98   |
| 八角       | 克      | 5      | 0.009  |
| 花椒       | 克      | 5      | 0.01   |
| 香叶       | 克      | 2      | 0.005  |
| 桂皮       | 克      | 2      | 0.006  |
| 小茴香      | 克      | 2      | 0.01   |
| 红茶       | 克      | 10     | 0.02   |
| 老抽       | 克      | 10     | 0.01   |
| 生抽       | 克      | 10     | 0.01   |
| 冰糖       | 克      | 10     | 0.02   |
| 盐        | 克      | 10     | 0.001  |
| 燃气       | 立方米    | 0.01   | 2.28   |
| 炊具       | 份      | 1      | 0.25   |
| 自然力      | 份      | 1      | 0      |

注意，表格里的值应该理解为进行批量生产时的一种平均值，而且这些值是假设出来的，只具有参考意义。各种生产要素的具体情况需要根据实际的生产情况来确定。

可以明白，一个茶叶蛋的价值等于该生产要素表中的每项生产要素的数量乘以单价的总和。在数学上，这个总和可以理解为一维的数量矩阵与一维的单价矩阵之点积。公式如下：

$$总价值 = \sum_{i=1}^n 数量_i \cdot 单价_i = 数量 \cdot 单价$$

根据上述数据和计算方式，可以设计一份代码，来计算一个茶叶蛋的价值。

[[最终产品价值的简单计算.py]]

```

```

计算结果显示，一个茶叶蛋的价值为2.40。

```
value: 2.40
```

# 最终产品价值的递归计算

但是，有的时候，我们可能不知道生产某种商品的若干种生产资料本身的价值。比如，如下表《茶叶蛋生产要素表》所示，生产者不知道鸡蛋和冰糖的单价。

茶叶蛋生产要素表

| **生产要素** | **单位** | **数量** | **单价** |
| -------- | ------ | ------ | ------ |
| 劳动       | 小时     | 0.1    | 4      |
| 鸡蛋       | 个      | 1      | x      |
| 八角       | 克      | 5      | 0.009  |
| 花椒       | 克      | 5      | 0.01   |
| 香叶       | 克      | 2      | 0.005  |
| 桂皮       | 克      | 2      | 0.006  |
| 小茴香      | 克      | 2      | 0.01   |
| 红茶       | 克      | 10     | 0.02   |
| 老抽       | 克      | 10     | 0.01   |
| 生抽       | 克      | 10     | 0.01   |
| 冰糖       | 克      | 10     | x      |
| 盐        | 克      | 10     | 0.001  |
| 燃气       | 立方米    | 0.01   | 2.28   |
| 炊具       | 份      | 1      | 0.25   |
| 自然力      | 份      | 1      | 0      |

所以需要去考察生产一个单位的鸡蛋和一个单位的冰糖各自的各种生产要素的投入情况，见下方的两个相关表格。

鸡蛋生产要素表

| **生产要素** | **单位** | **数量** | **单价** |
| -------- | ------ | ------ | ------ |
| 鸡圈       | 份      | 1      | 0.08   |
| 饲料       | 克      | 100    | x      |
| 劳动       | 小时     | 0.005  | 4      |
| 自然力      | 份      | 1      | 0      |

冰糖生产要素表

| **生产要素** | **单位** | **数量** | **单价** |
| -------- | ------ | ------ | ------ |
| 劳动       | 小时     | 0.0001 | 4      |
| 机器       | 份      | 0.0001 | 100    |
| 自然力      | 份      | 1      | 0      |

观察鸡蛋生产要素表发现，其中的饲料的单价仍然是未知的，于是还需要考察生产一个单位的饲料的各种生产要素的投入情况。

饲料生产要素表

| **生产要素** | **单位** | **数量** | **单价** |
| -------- | ------ | ------ | ------ |
| 机器       | 份      | 1      | 0.0005 |
| 劳动       | 小时     | 0.0001 | 4      |
| 自然力      | 份      | 1      | 0      |

现在，根据上述数据就可以递归地计算最终商品的价值。代码如下：

[[生产要素的递归计算.py]]

```
```

在生产要素表中，如果特定生产要素的单价是`x`，就表示该生产要素的单价需要回溯。我们首先在最终产品的单价列中检索`x`，如果有的话，就确定`x`相应的生产要素名，然后根据这个生产要素名，搜寻该生产要素作为产品的相应的生产要素表。然后在这个生产要素表中，按照同样的方式在该商品的单价列中检索`x`，如果有的话，重复上述搜寻过程。当递归得到单价列无`x`字符的生产要素表时，就可以计算其单价，然后将这个商品的单价作为其上一级商品的生产要素的单价，填充到上一级商品的生产要素表中。如果这个上一级商品之上还有相应的上上一级生产要素表，就继续这个填充商品单价的过程。这个遍历的过程使得一切未知的单价都被具体的数值所取代，于是最终商品的生产要素表中已经没有`x`，就可以直接计算出最终商品的价值。

比如，浏览茶叶蛋的生产要素表可知，其中的生产要素鸡蛋和冰糖的单价是未知的，我们就去找它们各自作为产品的生产要素表。在找到的鸡蛋的生产要素表中，又发现其生产要素饲料的单价是未知的，于是就去找饲料作为产品的生产要素表，发现该表中没有未知的量，于是就计算单位饲料的价值，把这个价值作为鸡蛋的生产要素饲料的单价，填充到鸡蛋的生产要素表中。鸡蛋的生产要素表中现在已经没有未知的单价，于是就可以计算其价值，并把这个价值作为茶叶蛋的生产要素鸡蛋的单价，填充到茶叶蛋的生产要素表中。对于作为产品的冰糖来说，其生产要素表中没有未知的单价，于是就可以计算其价值，并把这个价值作为茶叶蛋的生产要素冰糖的单价，填充到茶叶蛋的生产要素表中。经过上述这样的填充之后，茶叶蛋的生产要素表中就没有未知的单价了，于是就可以计算茶叶蛋的价值。

运行结果如下。由此可知，一个茶叶蛋的价值为1.51。

```
茶叶蛋
Have other goods!
goods_next: ['鸡蛋', '冰糖']
鸡蛋
Have other goods!
goods_next: ['饲料']
饲料
No other goods!
value of 饲料: 0.00
value of 鸡蛋: 0.19
冰糖
No other goods!
value of 冰糖: 0.01
value of 茶叶蛋: 1.51
```

应该指出，上述表格中的数值都是假设的，不具有特定的意义。但我们所得的递归计算最终产品价值的方法是通用的。

